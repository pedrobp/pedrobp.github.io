(this["webpackJsonpreact-challenge"]=this["webpackJsonpreact-challenge"]||[]).push([[0],{118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(12),i=a.n(c),r=a(68),d=a(31),o=a(21),l=a(53),s=a(38),j=a(25),b=a(39),h=a(55),u=Object(s.b)({name:"reminders",initialState:{value:[{id:Object(h.v4)(),city:"Belo Horizonte",date:new Date,description:"Reminder Example"}]},reducers:{addReminder:function(e,t){e.value=[].concat(Object(b.a)(e.value),[Object(j.a)({id:Object(h.v4)()},t.payload)])},deleteReminder:function(e,t){e.value=e.value.filter((function(e){return e.id!==t.payload}))},editReminder:function(e,t){var a=e.value.find((function(e){return e.id===t.payload.id})),n=e.value.indexOf(a);e.value=[].concat(Object(b.a)(e.value.slice(0,n)),[t.payload],Object(b.a)(e.value.slice(n+1,e.value.length+1)))}}}),O=u.actions,p=O.addReminder,f=O.deleteReminder,x=O.editReminder,m=function(e){return e.reminders.value},y=u.reducer,g=Object(s.b)({name:"snackbar",initialState:{open:!1,message:""},reducers:{show:function(e){e.open=!0},hide:function(e){e.open=!1},changeMessage:function(e,t){e.message=t.payload}}}),v=g.actions,w=v.show,C=v.hide,N=v.changeMessage,k=function(e){return e.snackbar},D=g.reducer,R=[l.a];o.d.apply(void 0,[o.a.apply(void 0,R)].concat([]));var M=Object(s.a)({reducer:{reminders:y,snackbar:D},middleware:Object(s.c)({serializableCheck:!1})}),H=a(90),I=a(14),S=a(28),W=a(166),E=a(163),P=a(169),T=a(167),F=a(168),B=a(175),A=a(161),G=a(120),L=a(176),z=a(174),V=a(162),J=a(157),Y=a(171),q=a(64),K=a.n(q),Q=a(88),U=a.n(Q),X=a(89),Z=a.n(X),$=a(92),_=a(3),ee=Object(J.a)({root:{width:"100%",backgroundColor:"#38bb4e",color:"white",display:"flex",borderRadius:"5px",lineHeight:"20px",cursor:"pointer","&:hover > #editIcon":{display:"block"}},time:{fontWeight:"bold",margin:"2px 5px"},content:{margin:"2px 5px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:1}}),te=function(e){var t=e.data,a=e.handleOpenReminder,n=ee();return Object(_.jsx)(L.a,{arrow:!0,enterDelay:500,title:t.description,children:Object(_.jsxs)($.a,{onClick:a,className:n.root,children:[Object(_.jsx)("div",{className:n.time,children:Object(P.a)(t.date,"HH:mm")}),Object(_.jsx)("div",{className:n.content,children:t.description})]})})},ae=a(173),ne=a(165),ce=a(158),ie=a(170),re=a(160),de=Object(J.a)({content:{display:"flex",flexDirection:"column",gap:"25px",width:"25vw"},alert:{flex:1,maxHeight:"20px",alignItems:"center",justifyContent:"center"},saveButton:{fontWeight:"bold"}}),oe=function(e){var t=e.data,a=e.handleChangeData,c=e.handleClose,i=Object(d.b)(),r=de(),o=Object(n.useState)(!1),l=Object(S.a)(o,2),s=l[0],b=l[1];return Object(_.jsxs)("div",{children:[Object(_.jsxs)(ce.a,{className:r.content,dividers:!0,children:[Object(_.jsx)(ie.a,{label:"Reminder description",placeholder:"Max. 30 characters",variant:"outlined",inputProps:{maxLength:30,"data-testid":"description-input"},value:t.description,onChange:function(e){return a(Object(j.a)(Object(j.a)({},t),{},{description:e.target.value}))}}),Object(_.jsx)(ie.a,{label:"City",variant:"outlined",inputProps:{"data-testid":"city-input"},value:t.city,onChange:function(e){return a(Object(j.a)(Object(j.a)({},t),{},{city:e.target.value}))}}),Object(_.jsx)(ie.a,{label:"Date and time",type:"datetime-local",variant:"outlined",inputProps:{"data-testid":"date-input"},className:r.textField,InputLabelProps:{shrink:!0},value:t.date,onChange:function(e){return a(Object(j.a)(Object(j.a)({},t),{},{date:e.target.value}))}})]}),Object(_.jsxs)(re.a,{children:[s&&Object(_.jsx)(Y.a,{className:r.alert,variant:"filled",severity:"warning",children:"Please complete all the blank fields!"}),Object(_.jsx)(V.a,{"data-testid":"add-reminder",onClick:function(){if(""===t.description||""===t.city||""===t.date)return b(!0);var e="";""!==t.id?(i(x({id:t.id,date:new Date(t.date),description:t.description,city:t.city})),e="Reminder was successfully edited!"):(i(p({id:Object(h.v4)(),date:new Date(t.date),description:t.description,city:t.city})),e="Reminder was successfully created!"),i(N(e)),i(w()),c()},color:"primary",variant:"contained",className:r.saveButton,children:"Save"})]})]})},le=a(164),se=a(86),je=a.n(se),be=a(85),he=a.n(be),ue=0,Oe=1,pe=2,fe=Object(J.a)({weatherPanel:{display:"flex",flexDirection:"column",flex:1},forecastContainer:{width:"100%",textAlign:"center"},image:{margin:0}}),xe=function(e){var t=e.mode,a=e.forecast,n=fe(),c=function(){return Object(_.jsx)("div",{children:"The weather forecast is only available within a 7-day range starting from the current day!"})};return Object(_.jsx)("div",{className:n.weatherPanel,children:function(e){switch(e){case ue:return c();case Oe:return Object(_.jsx)("div",{children:"The specified city was not found, therefore no forecast could be fetched."});case pe:return Object(_.jsxs)("div",{className:n.forecastContainer,children:[Object(_.jsx)(G.a,{variant:"h5",children:"".concat(parseInt(a.temp.day),"\xb0C")}),Object(_.jsx)("img",{className:n.image,width:150,height:150,alt:"clear",src:"http://openweathermap.org/img/wn/".concat(a.weather[0].icon,"@4x.png")})]});default:return c()}}(t)})},me="efafdce92f3ba03765871bfb88b3326e",ye=Object(J.a)({container:{display:"flex",flexDirection:"column",width:"40vw",minHeight:"30vh"},content:{display:"flex",flexDirection:"row"},contentRow:{display:"flex",flexDirection:"row",gap:"5px",alignItems:"center",textTransform:"capitalize"},details:{display:"flex",flexDirection:"column",flex:1,gap:"15px"},icon:{color:"#555"},bold:{fontWeight:"bold"},loadingContainer:{flex:1,textAlign:"center",alignSelf:"center"}}),ge=function(e){var t=e.data,a=e.handleClose,c=e.handleChangeMode,i=e.handleChangeData,r=Object(n.useState)(null),o=Object(S.a)(r,2),l=o[0],s=o[1],b=Object(n.useState)(ue),h=Object(S.a)(b,2),u=h[0],O=h[1],p=Object(n.useState)(!1),x=Object(S.a)(p,2),m=x[0],y=x[1],g=Object(d.b)(),v=ye();Object(n.useEffect)((function(){var e=(new Date).setHours(0,0);if(t.date>Object(E.a)(e,8)||t.date<e)return O(ue);y(!0),fetch("https://api.openweathermap.org/geo/1.0/direct?q=".concat(t.city,"&limit=1&appid=").concat(me)).then((function(e){return e.json()})).then((function(e){var a=e.shift();if(!a)return y(!1),O(Oe);fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a.lat,"&lon=").concat(a.lon,"&exclude=current,minutely,hourly,alerts&units=metric&appid=").concat(me)).then((function(e){return e.json()})).then((function(e){var a=e.daily.filter((function(e){return Object(B.a)(new Date(1e3*e.dt),t.date)}))[0];a&&(O(pe),s(a)),y(!1)}))}))}),[t,O]);return Object(_.jsxs)("div",{className:v.container,children:[Object(_.jsxs)(ce.a,{className:v.content,children:[Object(_.jsxs)("div",{className:v.details,children:[Object(_.jsx)(G.a,{color:"primary",gutterBottom:!0,variant:"h5",children:t.description}),Object(_.jsxs)("div",{className:v.contentRow,children:[Object(_.jsx)(G.a,{className:v.bold,children:"City: "}),Object(_.jsx)(G.a,{children:t.city})]}),Object(_.jsxs)("div",{className:v.contentRow,children:[Object(_.jsx)(G.a,{className:v.bold,children:"Date and time: "}),Object(_.jsx)(G.a,{children:Object(P.a)(t.date,"yyyy-MM-dd HH:mm")})]}),l&&Object(_.jsxs)("div",{className:v.contentRow,children:[Object(_.jsx)(G.a,{className:v.bold,children:"Weather forecast:"}),Object(_.jsx)(G.a,{children:l.weather[0].description})]})]}),m?Object(_.jsxs)("div",{className:v.loadingContainer,children:[Object(_.jsx)(le.a,{}),Object(_.jsx)("div",{children:"Getting weather data..."})]}):Object(_.jsx)(xe,{mode:u,forecast:l})]}),Object(_.jsxs)(re.a,{children:[Object(_.jsx)(A.a,{className:v.icon,onClick:function(){c(Ce.CONFIG),i(Object(j.a)(Object(j.a)({},t),{},{date:Object(P.a)(t.date,"yyyy-MM-dd'T'HH:mm")}))},children:Object(_.jsx)(he.a,{})}),Object(_.jsx)(A.a,{className:v.icon,onClick:function(){g(f(t.id)),a()},children:Object(_.jsx)(je.a,{})})]})]})},ve=a(87),we=a.n(ve),Ce={PREVIEW:0,CONFIG:1},Ne=Object(J.a)({title:{padding:"10px"},closeButton:{position:"absolute",right:"5px",top:"5px",color:"grey"}}),ke=function(e){var t=e.open,a=e.data,n=e.handleChangeData,c=e.handleClose,i=e.mode,r=e.handleChangeMode,d=Ne();return Object(_.jsxs)(ae.a,{maxWidth:"md",open:t,children:[Object(_.jsxs)(ne.a,{disableTypography:!0,className:d.title,children:[Object(_.jsx)(G.a,{variant:"h6",children:"Reminder Details"}),Object(_.jsx)(A.a,{"data-testid":"close-button",className:d.closeButton,onClick:c,children:Object(_.jsx)(we.a,{})})]}),i===Ce.PREVIEW?Object(_.jsx)(ge,{data:a,handleClose:c,handleChangeMode:r,handleChangeData:n}):i===Ce.CONFIG?Object(_.jsx)(oe,{data:a,handleChangeData:n,handleClose:c}):""]})},De=a(4),Re=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Me=Object(b.a)(Array(6).keys()),He=Object(b.a)(Array(7).keys()),Ie={blue:"#3f51b5",grey:"darkgrey",darkGrey:"#555"},Se=Object(J.a)({root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},title:{marginTop:"25px"},container:{width:"80%"},monthSelector:{display:"flex",alignItems:"center",justifyContent:"center"},gridContainer:{display:"grid",height:"80vh",gridAutoRows:"1fr",minHeight:"550px"},dayOfWeekRow:{display:"flex"},weekRow:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)"},dayOfWeek:{flex:1,textAlign:"center",color:"white",backgroundColor:Ie.blue,fontWeight:"bold",lineHeight:"30px"},dayContainer:{padding:"5px",position:"relative","&:hover > * #icon":{display:"block"}},weekendContainer:{backgroundColor:"#f7f3f3"},border:{border:"1px solid lightgrey"},dayOfMonth:{fontWeight:"bold",flex:1},chipList:{display:"flex",flexDirection:"column",gap:"5px",position:"absolute",maxHeight:"70%",width:"95%",paddingRight:"3px",overflowY:"auto"},dayHeader:{display:"flex"},addIcon:{padding:0,display:"none"},addButton:{position:"absolute",top:"25px",right:"10%",fontWeight:"bold"}}),We=function(){var e=Object(n.useState)(new Date),t=Object(S.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)({id:"",date:"",description:"",city:""}),r=Object(S.a)(i,2),o=r[0],l=r[1],s=Object(n.useState)(!1),j=Object(S.a)(s,2),b=j[0],h=j[1],u=Object(n.useState)(Ce.PREVIEW),O=Object(S.a)(u,2),p=O[0],f=O[1],x=Object(d.c)(m),y=Object(d.c)(k),g=Object(d.b)(),v=Se(),w=function(e,t){var a=[],n=new Date(e,t),c=Object(W.a)(n);return Me.forEach((function(){var e=[];He.forEach((function(){e.push(c),c=Object(E.a)(c,1)})),a.push(e)})),a}(a.getFullYear(),a.getMonth()),N=function(e){f(Ce.CONFIG),h(!0),e&&l({id:"",description:"",city:"",date:Object(P.a)(e.setHours(12,0),"yyyy-MM-dd'T'HH:mm")})},D=function(e){return e.getMonth()!==a.getMonth()?Ie.grey:Object(T.a)(e)?Ie.blue:Ie.darkGrey};return Object(_.jsxs)("div",{className:v.root,children:[Object(_.jsxs)("div",{className:v.container,children:[Object(_.jsx)("h1",{className:v.title,children:"Calendar"}),Object(_.jsxs)("div",{className:v.monthSelector,children:[Object(_.jsx)(A.a,{onClick:function(){return c(Object(F.a)(a,-1))},children:Object(_.jsx)(U.a,{})}),Object(_.jsx)(G.a,{variant:"h6",component:"label",children:Object(P.a)(a,"MMM yyyy")}),Object(_.jsx)(A.a,{onClick:function(){return c(Object(F.a)(a,1))},children:Object(_.jsx)(Z.a,{})})]}),Object(_.jsx)("div",{className:Object(De.a)(v.dayOfWeekRow,v.border),children:Re.map((function(e,t){return Object(_.jsx)(G.a,{className:v.dayOfWeek,children:e},t)}))}),Object(_.jsx)("div",{className:Object(De.a)(v.gridContainer,v.border),children:null===w||void 0===w?void 0:w.map((function(e,t){return Object(_.jsx)("div",{className:v.weekRow,children:e.map((function(e,t){return Object(_.jsxs)("div",{className:Object(De.a)(v.dayContainer,v.border,Object(T.a)(e)?v.weekendContainer:""),children:[Object(_.jsxs)("div",{className:v.dayHeader,style:{"&:hover > *":{display:"block"}},children:[Object(_.jsx)(G.a,{className:v.dayOfMonth,style:{color:D(e)},children:e.getDate()}),Object(_.jsx)(L.a,{arrow:!0,enterDelay:300,title:"Add a new reminder",children:Object(_.jsx)(A.a,{id:"icon",className:v.addIcon,onClick:function(){return N(e)},children:Object(_.jsx)(K.a,{})})})]}),Object(_.jsx)("div",{className:v.chipList,children:null===x||void 0===x?void 0:x.filter((function(t){return Object(B.a)(t.date,e)})).sort((function(e,t){return e.date<t.date?-1:1})).map((function(e,t){return Object(_.jsx)(te,{data:e,handleOpenReminder:function(){return t=e,f(Ce.PREVIEW),h(!0),void l(t);var t}},t)}))})]},t)}))},t)}))})]}),Object(_.jsx)(ke,{open:b,handleClose:function(){h(!1)},data:o,handleChangeData:l,mode:p,handleChangeMode:f}),Object(_.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:y.open,onClose:function(){g(C())},autoHideDuration:3e3,children:Object(_.jsx)(Y.a,{variant:"filled",severity:y.status,children:y.message})}),Object(_.jsxs)(V.a,{color:"primary",variant:"contained",className:v.addButton,onClick:function(){return N(new Date)},children:[Object(_.jsx)(K.a,{}),"New Reminder"]})]})},Ee=[{path:"/",component:We,exact:!0},{path:"/calendar",component:We,exact:!0}];var Pe=Object(I.f)((function(){return Object(_.jsx)("div",{className:"main",children:Object(H.a)(Ee)})})),Te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,177)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};a(118);i.a.render(Object(_.jsx)(d.a,{store:M,children:Object(_.jsx)(r.a,{children:Object(_.jsx)(Pe,{})})}),document.getElementById("root")),Te()}},[[119,1,2]]]);
//# sourceMappingURL=main.2c443634.chunk.js.map